import React, { useState } from 'react';
import styled from 'styled-components';
import {display_xl, display_large} from "../styles/font"; 
import {NavLink} from 'react-router-dom';
const Sidebar = () => {

  const [showSalesDropdown, setShowSalesDropdown] = useState(false);

  const toggleSalesDropdown = () => {
    setShowSalesDropdown(!showSalesDropdown);
  };

  return (
    <SidebarWrapper>
      <StoreName>딤딤섬 명동점</StoreName>

      <MenuList>
        <MenuItem>
          <StyledNavLink to="/">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16 24C15.0889 24 14.2333 23.7778 13.4333 23.3333C12.6333 22.8667 11.9778 22.2556 11.4667 21.5C10.9778 20.7222 10.7111 19.8778 10.6667 18.9667C10.6444 18.8333 10.7333 18.8556 10.9333 19.0333C11.1556 19.2111 11.3667 19.4222 11.5667 19.6667C11.7889 19.8889 11.8444 20 11.7333 20H5.33333V17.3333H11.7333C12.1556 17.3333 12.5222 17.4778 12.8333 17.7667C13.1444 18.0556 13.3111 18.4222 13.3333 18.8667C13.3778 19.3778 13.5111 19.8222 13.7333 20.2C13.9556 20.5556 14.2556 20.8333 14.6333 21.0333C15.0333 21.2333 15.4889 21.3333 16 21.3333C16.5111 21.3333 16.9667 21.2333 17.3667 21.0333C17.7667 20.8333 18.0667 20.5556 18.2667 20.2C18.4889 19.8222 18.6222 19.3778 18.6667 18.8667C18.6889 18.4222 18.8556 18.0556 19.1667 17.7667C19.4778 17.4778 19.8444 17.3333 20.2667 17.3333H26.6667V20H20.2667C20.1778 20 20.2333 19.8889 20.4333 19.6667C20.6333 19.4222 20.8444 19.2111 21.0667 19.0333C21.2889 18.8556 21.3778 18.8333 21.3333 18.9667C21.2889 19.8778 21.0111 20.7222 20.5 21.5C20.0111 22.2556 19.3667 22.8667 18.5667 23.3333C17.7667 23.7778 16.9111 24 16 24ZM9.33333 28C8.35556 28 7.45556 27.7667 6.63333 27.3C5.83333 26.8111 5.18889 26.1667 4.7 25.3667C4.23333 24.5444 4 23.6444 4 22.6667V9.33333C4 8.35555 4.23333 7.45555 4.7 6.63333C5.18889 5.81111 5.83333 5.16666 6.63333 4.7C7.45556 4.23333 8.35556 4 9.33333 4H22.6667C23.6444 4 24.5444 4.23333 25.3667 4.7C26.1889 5.16666 26.8333 5.81111 27.3 6.63333C27.7667 7.45555 28 8.35555 28 9.33333V22.6667C28 23.6444 27.7667 24.5444 27.3 25.3667C26.8333 26.1667 26.1889 26.8111 25.3667 27.3C24.5444 27.7667 23.6444 28 22.6667 28H9.33333ZM22.6667 25.3333C23.5111 25.3333 24.1667 25.1 24.6333 24.6333C25.1 24.1444 25.3333 23.4889 25.3333 22.6667V9.33333C25.3333 8.48889 25.1 7.83333 24.6333 7.36666C24.1667 6.9 23.5111 6.66667 22.6667 6.66667H9.33333C8.51111 6.66667 7.85556 6.9 7.36667 7.36666C6.9 7.83333 6.66667 8.48889 6.66667 9.33333V22.6667C6.66667 23.4889 6.9 24.1444 7.36667 24.6333C7.85556 25.1 8.51111 25.3333 9.33333 25.3333H22.6667Z" fill="currentColor"/>
            </svg>
            주문관리
          </StyledNavLink>
        </MenuItem>
        <Line />
        <MenuItem>
          <SalesMenuItem onClick={toggleSalesDropdown}>
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M16 29.3333C13.6 29.3333 11.3778 28.7333 9.33333 27.5333C7.28889 26.3333 5.66667 24.7111 4.46667 22.6667C3.26667 20.6222 2.66667 18.4 2.66667 16C2.66667 13.6 3.26667 11.3778 4.46667 9.33333C5.66667 7.26667 7.28889 5.64444 9.33333 4.46667C11.3778 3.26667 13.6 2.66667 16 2.66667C18.4 2.66667 20.6222 3.26667 22.6667 4.46667C24.7333 5.64444 26.3556 7.26667 27.5333 9.33333C28.7333 11.3778 29.3333 13.6 29.3333 16C29.3333 18.4 28.7333 20.6222 27.5333 22.6667C26.3556 24.7111 24.7333 26.3333 22.6667 27.5333C20.6222 28.7333 18.4 29.3333 16 29.3333ZM16 26.6667C17.9778 26.6667 19.7778 26.2 21.4 25.2667C23.0444 24.3333 24.3333 23.0556 25.2667 21.4333C26.2 19.7889 26.6667 17.9778 26.6667 16C26.6667 14.0222 26.2 12.2222 25.2667 10.6C24.3333 8.95555 23.0444 7.66666 21.4 6.73333C19.7778 5.8 17.9778 5.33333 16 5.33333C14.0222 5.33333 12.2111 5.8 10.5667 6.73333C8.94445 7.66666 7.66667 8.95555 6.73333 10.6C5.8 12.2222 5.33333 14.0222 5.33333 16C5.33333 17.9778 5.8 19.7889 6.73333 21.4333C7.66667 23.0556 8.94445 24.3333 10.5667 25.2667C12.2111 26.2 14.0222 26.6667 16 26.6667ZM20.0333 10.3333C20.1667 9.8 20.4778 9.47778 20.9667 9.36666C21.4556 9.25555 21.8889 9.36667 22.2667 9.7C22.6444 10.0111 22.7667 10.4333 22.6333 10.9667L19.9667 21.6333C19.8778 22.0778 19.6333 22.3778 19.2333 22.5333C18.8556 22.6889 18.4778 22.6889 18.1 22.5333C17.7222 22.3778 17.4778 22.0778 17.3667 21.6333L16 16.1667L14.6333 21.6333C14.5444 22.0778 14.3 22.3778 13.9 22.5333C13.5222 22.6889 13.1444 22.6889 12.7667 22.5333C12.3889 22.3778 12.1444 22.0778 12.0333 21.6333L9.36667 10.9667C9.21111 10.4333 9.32222 10.0111 9.7 9.7C10.1 9.36667 10.5444 9.25555 11.0333 9.36666C11.5222 9.47778 11.8333 9.8 11.9667 10.3333L13.3333 15.8333L14.7 10.3333C14.8111 9.91111 15.0556 9.62222 15.4333 9.46667C15.8111 9.31111 16.1889 9.31111 16.5667 9.46667C16.9667 9.62222 17.2111 9.91111 17.3 10.3333L18.6667 15.8333L20.0333 10.3333ZM12 17.3333H9.33333C8.77778 17.3333 8.38889 17.1111 8.16667 16.6667C7.96667 16.2222 7.96667 15.7778 8.16667 15.3333C8.38889 14.8889 8.77778 14.6667 9.33333 14.6667H12V17.3333ZM22.6667 14.6667C23.2222 14.6667 23.6 14.8889 23.8 15.3333C24.0222 15.7778 24.0222 16.2222 23.8 16.6667C23.6 17.1111 23.2222 17.3333 22.6667 17.3333H20V14.6667H22.6667Z" fill="currentColor"/>
            </svg>
            매출조회
            <DropdownArrow isOpen={showSalesDropdown}>
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 6L8 10L12 6" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
              </svg>
            </DropdownArrow>
          </SalesMenuItem>
          
          <DropdownMenu isOpen={showSalesDropdown}>
            <SubMenuItem>
              <StyledNavLink to="/SalesReport/Calendar">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M19 3H18V1H16V3H8V1H6V3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V8H19V19Z" fill="currentColor"/>
                </svg>
                달력
              </StyledNavLink>
            </SubMenuItem>
            <SubMenuItem>
              <StyledNavLink to="/SalesReport/DailyStats">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M5 9.2H7V19H9.2V5.8H11.2V19H13.4V9.8H15.4V19H17.6V2H19.6V19H22V21H3V19H5V9.2Z" fill="currentColor"/>
                </svg>
                일별 매출 통계
              </StyledNavLink>
            </SubMenuItem>
          </DropdownMenu>
        </MenuItem>
        <Line />
        <MenuItem>
          <StyledNavLink to="/StoreInfo">
            <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9.33333 28C8.37778 28 7.48889 27.7667 6.66667 27.3C5.84444 26.8111 5.18889 26.1556 4.7 25.3333C4.23333 24.5111 4 23.6222 4 22.6667V15.7667C3.28889 15.0333 2.81111 14.1667 2.56667 13.1667C2.32222 12.1444 2.38889 11.1222 2.76667 10.1L3.76667 7.46667C4.16667 6.42222 4.82222 5.58889 5.73333 4.96667C6.64444 4.32222 7.65556 4 8.76667 4H23.2333C24.3444 4 25.3556 4.32222 26.2667 4.96667C27.1778 5.58889 27.8333 6.41111 28.2333 7.43333L29.2333 10.1C29.6111 11.1222 29.6778 12.1444 29.4333 13.1667C29.2111 14.1667 28.7333 15.0333 28 15.7667V22.6667C28 23.6222 27.7556 24.5111 27.2667 25.3333C26.8 26.1556 26.1556 26.8111 25.3333 27.3C24.5111 27.7667 23.6222 28 22.6667 28H9.33333ZM22.6667 25.3333C23.5111 25.3333 24.1667 25.1 24.6333 24.6333C25.1 24.1444 25.3333 23.4889 25.3333 22.6667V17.1333C24.9111 17.2667 24.5333 17.3333 24.2 17.3333C23.4 17.3333 22.6444 17.1556 21.9333 16.8C21.2444 16.4444 20.6556 15.9667 20.1667 15.3667C19.6778 15.9667 19.0889 16.4444 18.4 16.8C17.7111 17.1556 16.9556 17.3333 16.1333 17.3333H15.8667C15.0667 17.3333 14.3111 17.1556 13.6 16.8C12.9111 16.4444 12.3222 15.9667 11.8333 15.3667C11.3667 15.9667 10.7778 16.4444 10.0667 16.8C9.35556 17.1556 8.6 17.3333 7.8 17.3333C7.48889 17.3333 7.11111 17.2667 6.66667 17.1333V22.6667C6.66667 23.4889 6.9 24.1444 7.36667 24.6333C7.85556 25.1 8.51111 25.3333 9.33333 25.3333H22.6667ZM7.8 14.6667C8.55556 14.6667 9.16667 14.4667 9.63333 14.0667C10.1 13.6667 10.3778 13.0889 10.4667 12.3333L11.1667 6.66667H8.76667C8.14445 6.66667 7.62222 6.81111 7.2 7.1C6.8 7.36666 6.5 7.78889 6.3 8.36666L5.3 11.0333C5.05556 11.7 5 12.3111 5.13333 12.8667C5.28889 13.4 5.6 13.8333 6.06667 14.1667C6.53333 14.5 7.11111 14.6667 7.8 14.6667ZM16.1333 14.6667C16.7333 14.6667 17.2444 14.5444 17.6667 14.3C18.0889 14.0333 18.4 13.6778 18.6 13.2333C18.8 12.7889 18.8667 12.2778 18.8 11.7L18.1667 6.66667H13.8333L13.2 11.7C13.1333 12.2778 13.2 12.7889 13.4 13.2333C13.6 13.6778 13.9111 14.0333 14.3333 14.3C14.7556 14.5444 15.2667 14.6667 15.8667 14.6667H16.1333ZM24.2 14.6667C24.9111 14.6667 25.5 14.5 25.9667 14.1667C26.4333 13.8333 26.7333 13.4 26.8667 12.8667C27 12.3111 26.9556 11.7 26.7333 11.0333L25.7333 8.36666C25.5111 7.78889 25.1889 7.36666 24.7667 7.1C24.3667 6.81111 23.8556 6.66667 23.2333 6.66667H20.8667L21.5333 12.3333C21.6444 13.0889 21.9222 13.6667 22.3667 14.0667C22.8333 14.4667 23.4444 14.6667 24.2 14.6667Z" fill="currentColor"/>
            </svg>
            가게정보
          </StyledNavLink>
        </MenuItem>
      </MenuList>
    </SidebarWrapper>
  );
};

export default Sidebar;

const SidebarWrapper = styled.aside`
  display: flex;
  padding: 1.25rem;
  flex-direction: column;
  align-items: flex-start;
  gap:3.75rem;

  width: 22.1875rem;
  flex-shrink: 0; 
  height: 100%;
  background-color: var(--white);
  border-radius: 1.25rem;
`;

const StoreName = styled.div`
  ${display_xl}
  color: var(--black);
  padding: 0.625rem;
  align-items: center;
  gap: 0.625rem;
  align-self: stretch;

  border-radius: 1.25rem;
  background: var(--gray100);
`;

// 메뉴 전체를 감싸는 ul 태그
const MenuList = styled.ul`
  list-style: none; /* li의 기본 점 모양 제거 */
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 1rem; /* 각 메뉴 아이템 사이의 간격 */
`;

const Line = styled.div`
  border-bottom: 1px solid var(--gray300);
  width: 100%;  
`;
// 각 메뉴 아이템을 위한 li 태그 (보통 스타일은 링크에 직접 줍니다)
const MenuItem = styled.li`
  alig-items: flex-start;
  align-self-stretch;
  padding: 0.62rem;
`;

// 클릭 가능한 링크 (NavLink)
const StyledNavLink = styled(NavLink)`
  ${display_large}
  display: flex; /* 링크가 li 영역 전체를 차지하도록 */
  border-radius: 0.5rem;
  text-decoration: none;
  gap: 0.75rem;

  color: var(--gray700);

  /* 마우스를 올렸을 때 스타일 */
  &:hover {
    color: var(--black);
  }

  /* 현재 활성화된 페이지일 때의 스타일 */
  &.active {
    color: var(--primary);
  }
`;

const SalesMenuItem = styled.div`
  ${display_large}
  display: flex;
  justify-content: space-between;
  align-items: center;
  text-decoration: none;
  gap: 0.75rem;
  color: var(--gray700);

  cursor: pointer;

  &:hover {
    color: var(--black);
  }

`;

const DropdownArrow = styled.div`
  transform: ${props => props.isOpen ? 'rotate(180deg)' : 'rotate(0deg)'};
  transition: transform 0.3s ease;
  display: flex;
  align-items: center;
  margin-left: auto;
`;

const DropdownMenu = styled.div`
  max-height: ${props => props.isOpen ? '200px' : '0'};
  overflow: hidden;
  transition: max-height 0.3s ease;
  padding-left: 1rem;
  margin-top: ${props => props.isOpen ? '0.5rem' : '0'};
`;

const SubMenuItem = styled.div`
  margin: 0.25rem 0;
  
  ${StyledNavLink} {
    padding: 0.5rem 0.75rem;
    font-size: 1rem;
    
    svg {
      width: 20px;
      height: 20px;
    }
  }
`;